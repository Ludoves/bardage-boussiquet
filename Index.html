<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Calcul Bardage + Couvre-joints</title>
<style>
body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif; background-color: #1c1c1e; color:#fff; margin:0; padding:0;}
.container { max-width: 420px; margin:40px auto; background:#2c2c34; padding:20px 25px; border-radius:20px; box-shadow:0 8px 20px rgba(0,0,0,0.3);}
h1 { text-align:center; font-weight:600; color:#fff; margin-bottom:10px;}
.logo { display:block; margin:0 auto 15px; max-width:120px; height:auto;}
label { display:block; margin-top:15px; font-weight:500;}
input[type="number"], input[type="text"] { width:100%; padding:10px 12px; margin-top:6px; border-radius:12px; border:1px solid #555; box-sizing:border-box; font-size:16px; background:#3c3c46; color:#fff;}
input[type="checkbox"] { margin-right:10px; transform:scale(1.3);}
.toggle-label { display:flex; align-items:center; margin-top:15px; font-weight:500;}
.buttons-pertes { display:flex; justify-content:space-between; margin-top:8px;}
.buttons-pertes button { flex:1; margin:0 5px; padding:10px 0; border:none; border-radius:12px; background-color:#007aff; color:#fff; font-weight:600; font-size:16px; box-shadow:0 4px 8px rgba(0,0,0,0.3); cursor:pointer; transition:0.2s;}
.buttons-pertes button:hover { background-color:#005ecb;}
.result { margin-top:25px; background-color:#3c3c46; padding:15px 20px; border-radius:16px; text-align:center; font-size:16px; font-weight:600; color:#fff; box-shadow:inset 0 2px 4px rgba(0,0,0,0.2); line-height:1.5;}
h2 { color:#fff; margin-bottom:10px; text-align:center; }
hr { margin:20px 0; border-color:#555; }
</style>
</head>
<body>
<div class="container">

    <!-- Logo -->
    <img src="logo.png" alt="Logo entreprise" class="logo">

    <h1>Calcul Bardage + Couvre-joints</h1>

    <!-- Bardage -->
    <label>Surface totale (m²)
        <input type="number" id="surface" value="0" min="0" step="0.1">
    </label>

    <label>Largeur de lame (mm)
        <input type="number" id="largeurLame" value="100" min="1">
    </label>

    <label>Longueur des lames (m)
        <input type="number" id="longueurLame" value="3" min="0.1" step="0.1">
    </label>

    <label>Pertes (%)</label>
    <div class="buttons-pertes">
        <button type="button" data-pertes="5">5%</button>
        <button type="button" data-pertes="10">10%</button>
        <button type="button" data-pertes="15">15%</button>
    </div>
    <input type="number" id="pertes" value="10" min="0" style="margin-top:10px; border-radius:12px; padding:10px; width:100%; border:1px solid #555; background:#3c3c46; color:#fff; font-size:16px;">

    <hr>

    <!-- Options à la fin -->
    <label class="toggle-label">
        <input type="checkbox" id="claireVoie"> Claire-voie
    </label>
    <div id="espacementSection" style="display:none;">
        <label>Espacement (mm)
            <input type="number" id="espacement" value="20" min="0">
        </label>
    </div>

    <label class="toggle-label">
        <input type="checkbox" id="includeCouv" checked> Inclure couvre-joints
    </label>
    <div id="couvSection" style="display:block;">
        <h2>Couvre-joints</h2>
        <label>Largeur du mur (m)
            <input type="number" id="largeurMur" value="0" min="0.1" step="0.1">
        </label>
        <label>Hauteur du mur (m)
            <input type="number" id="hauteurMur" value="0" min="0.1" step="0.1">
        </label>
        <label>Longueur des couvre-joints (m)
            <input type="number" id="longueurCouv" value="3" min="0.1" step="0.1">
        </label>
    </div>

    <div class="result" id="result">
        Ratio brut : 0 ml/m²<br>
        Ratio avec pertes : 0 ml/m²<br>
        Total bardage avec pertes : 0 ml<br>
        Nombre de lames : 0<br>
        Linéaire couvre-joints : 0 ml<br>
        Nombre de couvre-joints : 0
    </div>
</div>

<script>
const surfaceInput = document.getElementById("surface");
const largeurInput = document.getElementById("largeurLame");
const espacementInput = document.getElementById("espacement");
const longueurInput = document.getElementById("longueurLame");
const pertesInput = document.getElementById("pertes");
const claireVoieCheck = document.getElementById("claireVoie");
const espacementSection = document.getElementById("espacementSection");
const resultDiv = document.getElementById("result");

const includeCouvCheck = document.getElementById("includeCouv");
const couvSection = document.getElementById("couvSection");
const largeurMurInput = document.getElementById("largeurMur");
const hauteurMurInput = document.getElementById("hauteurMur");
const longueurCouvInput = document.getElementById("longueurCouv");

const pertesButtons = document.querySelectorAll(".buttons-pertes button");

function calculer() {
    let surface = parseFloat(surfaceInput.value) || 0;
    let lame = parseFloat(largeurInput.value) || 0;
    let vide = claireVoieCheck.checked ? parseFloat(espacementInput.value) || 0 : 0;
    let longueurLame = parseFloat(longueurInput.value) || 1;
    let pertes = parseFloat(pertesInput.value) || 0;

    // Bardage
    let pasMetre = (lame + vide)/1000;
    let ratioBrut = pasMetre > 0 ? 1/pasMetre : 0;
    let ratioAvecPerte = ratioBrut * (1 + pertes/100);
    let totalBardage = surface * ratioAvecPerte;
    let nbLames = longueurLame>0 ? Math.ceil(totalBardage/longueurLame) : 0;

    // Couvre-joints
    let totalCouv = 0;
    let nbCouv = 0;
    let largeurMur = parseFloat(largeurMurInput.value) || 0;
    let hauteurMur = parseFloat(hauteurMurInput.value) || 0;

    if(includeCouvCheck.checked && largeurMur>0 && hauteurMur>0){
        let largeurUtile = pasMetre;
        nbCouv = Math.max(Math.floor(largeurMur/largeurUtile)-1,0);
        let longueurCouv = parseFloat(longueurCouvInput.value)||hauteurMur;
        totalCouv = nbCouv * longueurCouv;
    }

    resultDiv.innerHTML = `Ratio brut : ${ratioBrut.toFixed(2)} ml/m²<br>
                           Ratio avec pertes : ${ratioAvecPerte.toFixed(2)} ml/m²<br>
                           Total bardage avec pertes : ${totalBardage.toFixed(1)} ml<br>
                           Nombre de lames : ${nbLames}<br>
                           Linéaire couvre-joints : ${totalCouv.toFixed(1)} ml<br>
                           Nombre de couvre-joints : ${nbCouv}`;
}

// Affichage dynamique des sections
claireVoieCheck.addEventListener("change", ()=>{ espacementSection.style.display = claireVoieCheck.checked ? "block" : "none"; calculer(); });
includeCouvCheck.addEventListener("change", ()=>{ couvSection.style.display = includeCouvCheck.checked ? "block" : "none"; calculer(); });

// Calcul automatique sur saisie
[surfaceInput, largeurInput, espacementInput, longueurInput, pertesInput,
 longueurCouvInput].forEach(el=>{ el.addEventListener("input", calculer); });

// Pertes rapides
pertesButtons.forEach(btn=>{ btn.addEventListener("click", e=>{ e.preventDefault(); pertesInput.value = btn.dataset.pertes; calculer(); }); });

// Dimensions automatiques pour couvre-joints
largeurMurInput.addEventListener("input", () => {
    const surface = parseFloat(surfaceInput.value) || 0;
    const largeurMur = parseFloat(largeurMurInput.value) || 0;
    if(largeurMur > 0){
        hauteurMurInput.value = (surface / largeurMur).toFixed(2);
    }
    calculer();
});

hauteurMurInput.addEventListener("input", () => {
    const surface = parseFloat(surfaceInput.value) || 0;
    const hauteurMur = parseFloat(hauteurMurInput.value) || 0;
    if(hauteurMur > 0){
        largeurMurInput.value = (surface / hauteurMur).toFixed(2);
    }
    calculer();
});

calculer();
</script>
</body>
</html>
